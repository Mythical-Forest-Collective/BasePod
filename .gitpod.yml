tasks:
  - name: "Install Nim"
    init: |
      curl https://nim-lang.org/choosenim/init.sh -sSf > choosenim.sh
      sh choosenim.sh -y
      rm choosenim.sh
      gp env PATH=$PATH:$HOME/.nimble/bin
      eval $(gp env -e)
      choosenim devel
      gp sync-done niminstall
      exit
  - name: "Download asmble"
    init: |
      wget https://github.com/cretz/asmble/releases/download/0.4.0/asmble-0.4.0.zip
      unzip asmble-0.4.0.zip
      rm asmble-0.4.0.zip
      gp sync-done asmbledownload
      exit
  - name: "Install Clang + Emscripten"
    init: |
      sudo apt-get update
      sudo apt install cmake python-is-python3 python3-distutils clang -y
      git clone https://github.com/emscripten-core/emsdk.git && cd emsdk && ./emsdk install latest && ./emsdk activate latest && cd ..
      echo "" >> ~/.bashrc
      echo "source $(realpath emsdk/emsdk_env.sh)" >> ~/.bashrc
      gp sync-done emccinstall
      exit
